
!function(w){
  function QR(el,opt){
    var txt=(opt&&opt.text)||'QR', s=(opt&&opt.width)||220;
    var c=document.createElement('canvas'); c.width=c.height=s; var ctx=c.getContext('2d');
    ctx.fillStyle='#fff'; ctx.fillRect(0,0,s,s);
    ctx.fillStyle='#000';
    for(var y=0;y<s;y+=10){ for(var x=0;x<s;x+=10){ if(((x+y)+txt.length*7)%23<9) ctx.fillRect(x,y,8,8); } }
    el.innerHTML=''; el.appendChild(c);
  }
  w.QRCode = QR;
}(window);
